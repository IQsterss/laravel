<?php
namespace App\Http\Controllers\Auth;

use App\Http\Controllers\Controller;
use Illuminate\Auth\Events\PasswordReset;
use Illuminate\Http\RedirectResponse;
use Illuminate\Http\Request;
use Illuminate\Support\Facades\Hash;
use Illuminate\Support\Facades\Password;
use Illuminate\Support\Str;
use Illuminate\Validation\Rules;
use Illuminate\View\View;
use Yandex\Geo\Api;

class MapController extends Controller
{
    public function showMap()
    {
        $user = User::find(1); // Replace with your logic to retrieve the user's address
        $address = $user->address;

        $api = new Api();
        $api->setQuery($address);

        $response = $api->load();

        if ($response->isSuccess()) {
            $result = $response->getResponse()->getList();
            $latitude = $result[0]->getLatitude();
            $longitude = $result[0]->getLongitude();
        } else {
            // Handle the case when geocoding fails
            $latitude = null;
            $longitude = null;
        }

        return view('map', [
            'latitude' => $latitude,
            'longitude' => $longitude
        ]);;
    }
}

?>